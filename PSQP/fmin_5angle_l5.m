function  T=fmin(x)
   
    % d1=x(1);d4=x(2);d6=x(3);a1=x(4);a2=x(5);a3=x(6);
    L1 = 815;
    L2 =  x(1) ;
    L3 = x(2) ;
    L4 = x(3);
    L5 = x(4);
    L6 = x(5);
    angle_err1 = x(6);
    angle_err2 = x(7);
    angle_err3 = x(8);
    angle_err4 = x(9);
    angle_err5 = x(10);
  angle = [
 -0.357268897883239,-0.680678408277789,-0.663225115757845,1.16937059883620,-1.65806278939461,0.907571211037051;-0.322362312843353,-0.575958653158129,-0.785398163397448,1.25663706143592,-1.62315620435473,0.802851455917392;-0.776147918361878,-0.663225115757845,-0.890117918517108,0.628318530717959,-1.58824961931484,0.802851455917392;-0.374722190403183,-0.855211333477221,-0.471238898038469,1.11701072127637,-1.55334303427495,0.837758040957278;-0.392175482923126,-0.733038285837618,-0.593411945678072,1.08210413623648,-1.55334303427495,0.890117918517108;-0.427082067963012,-0.855211333477221,-0.349065850398866,1.18682389135614,-1.51843644923507,1.13446401379631;-0.427082067963012,-0.802851455917392,-0.401425727958696,1.13446401379631,-1.51843644923507,1.06465084371654;-0.357268897883239,-0.418879020478639,-0.785398163397448,1.02974425867665,-1.51843644923507,1.09955742875643;-0.357268897883239,-0.750491578357562,-0.750491578357562,0.907571211037051,-1.51843644923507,0.785398163397448;-0.741241333321992,-0.558505360638186,-0.820304748437335,0.767944870877505,-1.51843644923507,0.698131700797732;-0.339815605363296,-0.750491578357562,-0.767944870877505,0.925024503556995,-1.50098315671512,0.698131700797732;-0.409628775443069,-0.802851455917392,-0.314159265358979,1.20427718387609,-1.48352986419518,1.08210413623648;-0.392175482923126,-0.488692190558412,-0.401425727958696,1.25663706143592,-1.46607657167524,1.48352986419518;-0.392175482923126,-0.506145483078356,-0.401425727958696,1.22173047639603,-1.46607657167524,1.32645023151569;-0.357268897883239,-0.610865238198015,-0.663225115757845,1.15191730631626,-1.46607657167524,1.09955742875643;-0.357268897883239,-0.610865238198015,-0.750491578357562,1.13446401379631,-1.46607657167524,0.872664625997165;-0.392175482923126,-0.663225115757845,-0.663225115757845,0.907571211037051,-1.46607657167524,0.977384381116825;-0.339815605363296,-0.209439510239320,-0.610865238198015,1.27409035395586,-1.44862327915529,1.27409035395586;-0.322362312843353,-0.575958653158129,-0.767944870877505,1.18682389135614,-1.44862327915529,0.925024503556995;-0.322362312843353,-0.610865238198015,-0.837758040957278,1.16937059883620,-1.44862327915529,0.872664625997165;-0.427082067963012,-0.837758040957278,-0.488692190558412,0.872664625997165,-1.44862327915529,1.02974425867665;-0.793601210881822,-0.750491578357562,-0.523598775598299,0.733038285837618,-1.44862327915529,1.02974425867665;-0.392175482923126,-0.541052068118242,-0.680678408277789,1.09955742875643,-1.43116998663535,1.08210413623648;-0.374722190403183,-0.680678408277789,-0.506145483078356,1.02974425867665,-1.43116998663535,0.994837673636768;-0.374722190403183,-0.506145483078356,-0.593411945678072,0.942477796076938,-1.43116998663535,1.16937059883620;-0.339815605363296,-0.471238898038469,-0.855211333477221,1.16937059883620,-1.41371669411541,0.925024503556995;-0.392175482923126,-0.558505360638186,-0.506145483078356,1.16937059883620,-1.41371669411541,1.08210413623648;-0.357268897883239,-0.575958653158129,-0.715584993317675,0.994837673636768,-1.41371669411541,0.890117918517108;-0.758694625841935,-0.663225115757845,-0.855211333477221,0.541052068118242,-1.41371669411541,0.785398163397448;-0.409628775443069,-0.593411945678072,-0.331612557878923,1.27409035395586,-1.39626340159546,1.22173047639603;-0.427082067963012,-0.837758040957278,-0.244346095279206,1.09955742875643,-1.39626340159546,1.20427718387609;-0.339815605363296,-0.750491578357562,-0.698131700797732,0.994837673636768,-1.39626340159546,0.680678408277789;-0.723788040802049,-0.575958653158129,-0.628318530717959,0.890117918517108,-1.39626340159546,1.08210413623648;-0.793601210881822,-0.645771823237902,-0.575958653158129,0.663225115757845,-1.39626340159546,0.802851455917392;-0.304909020323409,-0.0349065850398866,-0.593411945678072,1.32645023151569,-1.37881010907552,1.51843644923507;-0.357268897883239,-0.279252680319093,-0.750491578357562,1.23918376891597,-1.37881010907552,1.02974425867665;-0.409628775443069,-0.523598775598299,-0.610865238198015,1.06465084371654,-1.37881010907552,1.04719755119660;-0.427082067963012,-0.767944870877505,-0.383972435438753,1.01229096615671,-1.37881010907552,1.13446401379631;-0.444535360482956,-0.785398163397448,-0.244346095279206,0.977384381116825,-1.37881010907552,1.02974425867665;-0.357268897883239,-0.349065850398866,-0.820304748437335,1.15191730631626,-1.36135681655558,0.959931088596881;-0.392175482923126,-0.733038285837618,-0.488692190558412,1.09955742875643,-1.36135681655558,0.994837673636768;-0.427082067963012,-0.715584993317675,-0.226892802759263,1.09955742875643,-1.36135681655558,1.30899693899575;-0.374722190403183,-0.541052068118242,-0.698131700797732,1.02974425867665,-1.36135681655558,0.977384381116825;-0.427082067963012,-0.802851455917392,-0.418879020478639,1.01229096615671,-1.36135681655558,1.04719755119660;-0.357268897883239,-0.261799387799149,-0.523598775598299,1.36135681655558,-1.34390352403563,1.34390352403563;-0.357268897883239,-0.314159265358979,-0.453785605518526,1.27409035395586,-1.34390352403563,1.34390352403563;-0.357268897883239,-0.157079632679490,-0.785398163397448,1.25663706143592,-1.34390352403563,1.32645023151569;-0.322362312843353,-0.506145483078356,-0.715584993317675,1.22173047639603,-1.34390352403563,1.09955742875643;-0.357268897883239,-0.174532925199433,-0.645771823237902,1.22173047639603,-1.34390352403563,1.48352986419518;-0.357268897883239,-0.261799387799149,-0.523598775598299,1.20427718387609,-1.34390352403563,1.53588974175501
];


    pr = [   
1137.70784042928,-695.110397206439,759.633523052591;1059.47739700133,-630.331710342674,790.728261606450;781.499308638816,-995.382275090400,679.103313944081;1256.96662424486,-761.066437172728,639.584080963737;1185.50937304599,-754.038155701556,715.651117900924;1279.15704949778,-862.848835912327,685.448283056845;1265.33203071725,-850.223035715237,722.993902186128;1098.69558748545,-662.435099599067,918.308633188227;1142.14425845949,-658.524923068572,629.124849480531;826.478912976779,-1016.51579409428,785.391917471331;1135.79007120529,-634.950659822213,617.844621850295;1319.30989142569,-852.455521529136,756.578457296647;1250.00812083160,-799.330644580897,1053.64201919755;1261.47664422094,-800.704977536217,1039.81176558070;1158.14210908281,-700.109348240332,777.649290712229;1100.99550654946,-676.646853755783,738.392339148615;1194.21913655710,-728.111936931148,740.160423253574;1111.93808111553,-670.545633569008,1179.12096567699;1100.38356233798,-635.319322175875,754.993466757417;1049.23328345961,-616.402910024715,697.894144992154;1276.88618547305,-811.833339713073,636.165687319759;929.492953432214,-1206.82013904086,725.118539152288;1138.62942942858,-734.518405164597,832.117939783267;1282.38538808609,-756.152269546485,789.809122397130;1242.77205131722,-726.450830615359,935.346222564395;1035.90792484633,-632.328785590919,798.864429175854;1232.84940684213,-781.148535219273,906.137992331566;1167.43421813898,-679.900283164657,782.259606505683;843.299868654884,-993.735799852611,645.842497052704;1296.33325936360,-846.038992256600,964.829731584365;1379.00876390377,-893.454630252155,746.394578150004;1173.26930522760,-656.653624052267,614.042982359226;922.787823130561,-1097.69600806627,833.950540300474;929.168413590590,-1183.50306787230,804.168844803635;1072.85313726743,-612.574996006126,1325.38270391223;1064.96534400914,-670.514530763703,1007.59108307982;1183.39978966898,-771.926020597315,880.306894117662;1322.83794573429,-854.324698976593,749.583226153541;1396.45687687286,-913.729732962964,823.644320775299;1053.58603561577,-656.400690009559,909.075321884440;1265.79973249316,-783.670732167265,716.927927873841;1392.06449819197,-897.458624556534,906.986233447614;1162.80169425136,-706.018483933285,809.783931132643;1298.79902241499,-842.496280390386,682.519839069690;1158.16419576225,-712.650621606201,1157.99484052645;1222.65496706081,-730.470143394834,1174.98026533456;1020.01355330512,-653.493382509228,1078.41280640036;1138.83507931150,-646.690215049458,813.933866537299;1102.12191210108,-680.603664941266,1171.99728313111;1188.84351638400,-711.208936510166,1186.33153766218
];


     M=[ 0  0 1 L4 + L5 + L6;
         0 -1 0            0;
         1  0 0 L1 + L2 + L3;
         0  0 0            1 ]  ;


    Slist = [[0; 0; 1 ;        0;            0;          0], ...d
            [0; -1; 0;       L1;            0;       - L6],...
            [0; -1; 0;  L1 + L2;            0;       - L6],...
            [1; 0; 0;        0;  L1 + L2 + L3;          0],...
            [0; 1; 0; -(L1+L2+L3);             0;  L6 + L4],...
            [1; 0; 0;        0;   L1 + L2 + L3;         0]];

    for i = 1 : 210
        theta1 = angle(i,1) + angle_err1;
        theta2 = angle(i,2) + angle_err2;
        theta3 = angle(i,3) + angle_err3;
        theta4 = angle(i,4) + angle_err4;
        theta5 = angle(i,5) + angle_err5;
        theta6 = angle(i,6);


        thetalist = [theta1; theta2;  theta3;  theta4;  theta5; theta6];
        Ts = FKinSpace(M,Slist,thetalist);
        err(i,:) = Ts(1:3,4)' - pr(i,:);
    end
    temp =  err.^2 ;
    temp = temp(:,1) +temp(:,2) +temp(:,3);
    temp = sqrt(temp);
    temp( find(temp == max(temp))) = 0;
    temp( find(temp == max(temp))) = 0;
    temp( find(temp == max(temp))) = 0;


    T=sum(temp);



end